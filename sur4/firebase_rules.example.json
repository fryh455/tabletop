{
  "rules": {
    ".read": false,
    ".write": false,
    "rooms": {
      "$roomId": {
        ".read": "auth != null",
        "meta": {
          ".write": "auth != null && (!data.exists() || data.child('masterUid').val() == auth.uid)"
        },
        "players": {
          "$uid": {
            ".write": "auth != null && auth.uid == $uid"
          }
        },
        "map": {
          ".write": "auth != null && root.child('rooms/'+$roomId+'/meta/masterUid').val() == auth.uid"
        },
        "tokens": {
          "$tokenId": {
            ".write": "auth != null && (root.child('rooms/'+$roomId+'/meta/masterUid').val() == auth.uid || (newData.child('ownerUid').val() == auth.uid && root.child('rooms/'+$roomId+'/map/locked').val() != true))"
          }
        },
        "sheets": {
          "$sheetId": {
            ".write": "auth != null && (root.child('rooms/'+$roomId+'/meta/masterUid').val() == auth.uid || data.child('ownerUid').val() == auth.uid)"
          }
        },
        "rolls": {
          "$rollId": {
            ".write": "auth != null"
          }
        }
      }
    }
  }
}